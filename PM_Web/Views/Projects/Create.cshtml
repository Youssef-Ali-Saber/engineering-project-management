@model PM.Models.ViewModels.ProjectViewModel

@{
    ViewData["Title"] = "Create Project";
}


<div class="container">
    <h2 class="text-center mt-4">@ViewData["Title"]</h2>

    <div class="row justify-content-center mt-5">
        <div class="col-md-8">
            <div class="card shadow border-0">
               
                <div class="card-body p-4">
                    <form asp-action="Create" method="post" class="row needs-validation" novalidate>
                        <div asp-validation-summary="ModelOnly" class="alert alert-danger"></div>

                        <div class="form-group mb-3 col-md-6">
                            <label asp-for="ProjectName" class="control-label font-weight-bold"></label>
                            <input asp-for="ProjectName" class="form-control form-control-lg" placeholder="Enter project name" />
                            <span asp-validation-for="ProjectName" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3 col-md-6">
                            <label asp-for="Location" class="control-label font-weight-bold"></label>
                            <input asp-for="Location" class="form-control form-control-lg" placeholder="Enter location" />
                            <span asp-validation-for="Location" class="text-danger"></span>
                        </div>

                        <div class="form-group mb-3 col-md-6">
                            <label asp-for="ProjectNature" class="control-label font-weight-bold"></label>
                            <input asp-for="ProjectNature" class="form-control form-control-lg" placeholder="Enter project nature" />
                            <span asp-validation-for="ProjectNature" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3 col-md-6">
                            <label asp-for="ProjectType" class="control-label font-weight-bold"></label>
                            <input asp-for="ProjectType" class="form-control form-control-lg" placeholder="Enter project type" />
                            <span asp-validation-for="ProjectType" class="text-danger"></span>
                        </div>

                        <div class="form-group mb-3 col-md-6">
                            <label asp-for="JVPartners" class="control-label font-weight-bold"></label>
                            <input asp-for="JVPartners" class="form-control form-control-lg" placeholder="Enter number of JV partners" />
                            <span asp-validation-for="JVPartners" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3 col-md-6">
                            <label asp-for="ProjectValue" class="control-label font-weight-bold"></label>
                            <input asp-for="ProjectValue" class="form-control form-control-lg" placeholder="Enter project value" />
                            <span asp-validation-for="ProjectValue" class="text-danger"></span>
                        </div>

                        <div class="form-group mb-3 col-md-6">
                            <label asp-for="ProjectStage" class="control-label font-weight-bold"></label>
                            <input asp-for="ProjectStage" class="form-control form-control-lg" placeholder="Enter project stage" />
                            <span asp-validation-for="ProjectStage" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3 col-md-6">
                            <label asp-for="DeliveryStrategies" class="control-label font-weight-bold"></label>
                            <input asp-for="DeliveryStrategies" class="form-control form-control-lg" placeholder="Enter delivery strategies" />
                            <span asp-validation-for="DeliveryStrategies" class="text-danger"></span>
                        </div>

                        <div class="form-group mb-3">
                            <label asp-for="ContractingStrategies" class="control-label font-weight-bold"></label>
                            <input asp-for="ContractingStrategies" class="form-control form-control-lg" placeholder="Enter contracting strategies" />
                            <span asp-validation-for="ContractingStrategies" class="text-danger"></span>
                        </div>
                        <hr />

                        <div class="form-group mb-3">
                            <label class="control-label font-weight-bold">Owners</label>
                            <table class="table table-bordered">
                                <tbody id="ownersTable">
                                    <tr>
                                        <td><input name="Owners[0].Name" class="form-control form-control-lg" placeholder="Enter owner name" /></td>
                                        <td><button type="button" class="btn btn-danger" onclick="removeRow(this)">Remove</button></td>
                                    </tr>
                                </tbody>
                            </table>
                            <button type="button" class="btn btn-primary" onclick="addOwnerRow()">Add Owner</button>
                        </div>
                        <hr />

                        <div class="form-group mb-3">
                            <label class="control-label font-weight-bold">Scope Packages</label>
                            <table class="table table-bordered">
                                <tbody id="scopePackagesTable">
                                    <tr>
                                        <td><input name="ScopePackages[0].Name" class="form-control form-control-lg" placeholder="Enter scope package name" /></td>
                                        <td><button type="button" class="btn btn-danger" onclick="removeRow(this)">Remove</button></td>
                                    </tr>
                                </tbody>
                            </table>
                            <button type="button" class="btn btn-primary" onclick="addScopePackageRow()">Add Scope Package</button>
                        </div>
                        <hr />

                        <div class="form-group mb-3">
                            <label class="control-label font-weight-bold">Bill of Quantities (BOQ)</label>
                            <table class="table table-bordered">
                                <tbody id="boqTable">
                                    <tr>
                                        <td><input name="BOQs[0].Name" class="form-control form-control-lg" placeholder="Enter BOQ name" /></td>
                                        <td><input name="BOQs[0].Quantity" class="form-control form-control-lg" placeholder="Enter quantity" /></td>
                                        <td><input name="BOQs[0].Cost" class="form-control form-control-lg" placeholder="Enter cost" /></td>
                                        <td><button type="button" class="btn btn-danger" onclick="removeRow(this)">Remove</button></td>
                                    </tr>
                                </tbody>
                            </table>
                            <button type="button" class="btn btn-primary" onclick="addBOQRow()">Add BOQ</button>
                        </div>
                        <hr />
                        <div class="form-group mb-3">
                            <label class="control-label font-weight-bold">Activities</label>
                            <table class="table table-bordered">
                                <tbody id="activitiesTable">
                                    <tr>
                                        <td><input name="Activities[0].Name" class="form-control form-control-lg" placeholder="Enter activity name" /></td>
                                        <td><input name="Activities[0].StartDate" type="date" class="form-control form-control-lg" /></td>
                                        <td><input name="Activities[0].EndDate" type="date" class="form-control form-control-lg" /></td>
                                        <td><button type="button" class="btn btn-danger" onclick="removeRow(this)">Remove</button></td>
                                    </tr>
                                </tbody>
                            </table>
                            <button type="button" class="btn btn-primary" onclick="addActivityRow()">Add Activity</button>
                        </div>
                        <hr />
                        <div class="form-group mb-3">
                            <label class="control-label font-weight-bold">Team Manager</label>
                            <div class="mb-3">
                                <input name="TeamManager.Name" class="form-control form-control-lg" placeholder="Enter manager name" />
                            </div>
                            <div class="mb-3">
                                <input name="TeamManager.Email" type="email" class="form-control form-control-lg" placeholder="Enter manager email" />
                            </div>
                            <div class="mb-3">
                                <input name="TeamManager.Password" type="password" class="form-control form-control-lg" placeholder="Enter manager password" />
                            </div>
                        </div>
                        <hr />
                        <!-- Team Members -->
                        <div class="form-group mb-3">
                            <label class="control-label font-weight-bold">Team Members</label>
                            <table class="table table-bordered">
                                <tbody id="teamMembersTable">
                                    <tr>
                                        <td><input name="TeamMembers[0].Name" class="form-control form-control-lg" placeholder="Enter name" /></td>
                                        <td><input name="TeamMembers[0].Email" type="email" class="form-control form-control-lg" placeholder="Enter email" /></td>
                                        <td><input name="TeamMembers[0].Password" type="password" class="form-control form-control-lg" placeholder="Enter password" /></td>
                                        <td><button type="button" class="btn btn-danger" onclick="removeRow(this)">Remove</button></td>
                                    </tr>
                                </tbody>
                            </table>
                            <button type="button" class="btn btn-primary" onclick="addTeamMemberRow()">Add Team Member</button>
                        </div>

                        <div class="form-group text-center">
                            <input type="submit" value="Create" class="btn btn-success btn-lg w-100" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="text-center mt-3">
        <a asp-action="Index" class="btn btn-secondary">Back to List</a>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        function addOwnerRow() {
            var table = document.getElementById("ownersTable");
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);
            var cell1 = row.insertCell(0);
            var element1 = document.createElement("input");
            element1.type = "text";
            element1.name = "Owners[" + rowCount + "].Name";
            element1.className = "form-control";
            element1.placeholder = "Enter owner name";
            cell1.appendChild(element1);
            var cell2 = row.insertCell(1);
            var button = document.createElement("button");
            button.type = "button";
            button.className = "btn btn-danger";
            button.onclick = function () { removeRow(this) };
            button.innerHTML = "Remove";
            cell2.appendChild(button);
        }

        function addScopePackageRow() {
            var table = document.getElementById("scopePackagesTable");
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);
            var cell1 = row.insertCell(0);
            var element1 = document.createElement("input");
            element1.type = "text";
            element1.name = "ScopePackages[" + rowCount + "].Name";
            element1.className = "form-control";
            element1.placeholder = "Enter scope package name";
            cell1.appendChild(element1);
            var cell2 = row.insertCell(1);
            var button = document.createElement("button");
            button.type = "button";
            button.className = "btn btn-danger";
            button.onclick = function () { removeRow(this) };
            button.innerHTML = "Remove";
            cell2.appendChild(button);
        }

        function addBOQRow() {
            var table = document.getElementById("boqTable");
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);
            var cell1 = row.insertCell(0);
            var element1 = document.createElement("input");
            element1.type = "text";
            element1.name = "BOQs[" + rowCount + "].Name";
            element1.className = "form-control";
            element1.placeholder = "Enter BOQ name";
            cell1.appendChild(element1);
            var cell2 = row.insertCell(1);
            var element2 = document.createElement("input");
            element2.type = "text";
            element2.name = "BOQs[" + rowCount + "].Quantity";
            element2.className = "form-control";
            element2.placeholder = "Enter quantity";
            cell2.appendChild(element2);
            var cell3 = row.insertCell(2);
            var element3 = document.createElement("input");
            element3.type = "text";
            element3.name = "BOQs[" + rowCount + "].Cost";
            element3.className = "form-control";
            element3.placeholder = "Enter cost";
            cell3.appendChild(element3);
            var cell4 = row.insertCell(3);
            var button = document.createElement("button");
            button.type = "button";
            button.className = "btn btn-danger";
            button.onclick = function () { removeRow(this) };
            button.innerHTML = "Remove";
            cell4.appendChild(button);
        }

        function addActivityRow() {
            var table = document.getElementById("activitiesTable");
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);
            var cell1 = row.insertCell(0);
            var element1 = document.createElement("input");
            element1.type = "text";
            element1.name = "Activities[" + rowCount + "].Name";
            element1.className = "form-control";
            element1.placeholder = "Enter activity name";
            cell1.appendChild(element1);
            var cell2 = row.insertCell(1);
            var element2 = document.createElement("input");
            element2.type = "date";
            element2.name = "Activities[" + rowCount + "].StartDate";
            element2.className = "form-control";
            cell2.appendChild(element2);
            var cell3 = row.insertCell(2);
            var element3 = document.createElement("input");
            element3.type = "date";
            element3.name = "Activities[" + rowCount + "].EndDate";
            element3.className = "form-control";
            cell3.appendChild(element3);
            var cell4 = row.insertCell(3);
            var button = document.createElement("button");
            button.type = "button";
            button.className = "btn btn-danger";
            button.onclick = function () { removeRow(this) };
            button.innerHTML = "Remove";
            cell4.appendChild(button);
        }
        function addTeamMemberRow() {
            var table = document.getElementById("teamMembersTable");
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var cell1 = row.insertCell(0);
            var element1 = document.createElement("input");
            element1.type = "text";
            element1.name = "TeamMembers[" + rowCount + "].Name";
            element1.className = "form-control";
            element1.placeholder = "Enter team member name";
            cell1.appendChild(element1);

            var cell2 = row.insertCell(1);
            var element2 = document.createElement("input");
            element2.type = "email";
            element2.name = "TeamMembers[" + rowCount + "].Email";
            element2.className = "form-control";
            element2.placeholder = "Enter team member email";
            cell2.appendChild(element2);

            var cell3 = row.insertCell(2);
            var element3 = document.createElement("input");
            element3.type = "password";
            element3.name = "TeamMembers[" + rowCount + "].Password";
            element3.className = "form-control";
            element3.placeholder = "Enter team member password";
            cell3.appendChild(element3);

            var cell4 = row.insertCell(3);
            var button = document.createElement("button");
            button.type = "button";
            button.className = "btn btn-danger";
            button.onclick = function () { removeRow(this) };
            button.innerHTML = "Remove";
            cell4.appendChild(button);
        }

        function removeRow(button) {
            var row = button.parentNode.parentNode;
            row.parentNode.removeChild(row);
        }
    </script>
}
